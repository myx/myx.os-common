#!/bin/sh

##### !!! This script is universal for FreeBSD, Darwin, Ubuntu. !!! #####

ExecShStdin(){
	sh -c 'eval "`cat`"' ExecShStdin "$@"
}

case "$0" in
	*/myx.common/bin/lib/execShStdin) 
		if [ "--help" = "$1" ] ; then
			echo "Syntax: myx.common lib/execShStdin [--bash] [<arguments...>]" >&2
			exit 1
		fi
		set -e

		if [ "--bash" = "$1" ] ; then
			shift
			if [ ! -n "$BASH_VERSION" ] || [ "5913621" != "` cat <( echo 5913621 ) 2> /dev/null `" ] ; then
				bash -c 'eval "`cat`"' ExecShStdin "$@"
				exit 0
			fi
		fi

		eval "`cat`" "$@"
	;;
esac
