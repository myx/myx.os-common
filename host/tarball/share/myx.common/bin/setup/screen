#!/bin/sh

###
###   myx.common lib/setupShellCompletion "myx.common" --command "myx.common help --bare"
###   myx.common lib/setupShellCompletion "myx.common" --directory "/usr/local/share/myx.common/bin"
###

type UserRequireRoot >/dev/null 2>&1 || \
	. "/usr/local/share/myx.common/bin/user/requireRoot"

type ReplaceLine >/dev/null 2>&1 || \
	. "/usr/local/share/myx.common/bin/lib/replaceLine"

SetupHostScreen(){
	UserRequireRoot "SetupHostScreen"

	echo "Setting up screenrc for host" >&2
	
	local commonScreenRc="$(myx.common os/getCommonScreenRc)"
	[ -f "$commonScreenRc" ] || touch "$commonScreenRc"
	[ ! -f "$commonScreenRc" ] || ReplaceLine "$commonScreenRc" " ### myx.common setup/screen ###$" \
		". /usr/local/share/myx.common/include/console/screen/screenrc  ### myx.common setup/screen ###"

	# cp /usr/local/share/myx.common/include/console/screen/screenrc "`myx.common os/getCommonScreenRc`"
}

SetupUserScreen(){
	echo "Setting up screen for: $HOME" >&2
	
	[ -f "~/.screenrc" ] || touch "~/.screenrc"
	[ ! -f "~/.screenrc" ] || ReplaceLine "~/.screenrc" " ### myx.common setup/screen ###$" \
		". /usr/local/share/myx.common/include/console/screen/screenrc  ### myx.common setup/screen ###"

	# cp /usr/local/share/myx.common/include/console/screen/screenrc "~/.screenrc"
}


if [ "$1" = "--host" ] ; then
	SetupHostScreen
else
	SetupUserScreen
fi
